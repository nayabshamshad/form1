"use strict";(globalThis["webpackChunkform1_quasar"]=globalThis["webpackChunkform1_quasar"]||[]).push([[493],{9493:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(9835),s=n(6970);const l={class:"container"},o={class:"attendance-container"},i={class:"attendance-summary"},r=(0,a._)("h5",{style:{"font-size":"18px"}},[(0,a._)("span",null,"Summary")],-1),u={class:"flex justify-space-around"},d={class:"eventlist"},c=(0,a.Uk)(" Add Event "),v={style:{"margin-top":"1rem"},class:"flex justify-center"},f={key:1,style:{width:"60%"}};function h(e,t,n,h,m,p){var g,w,b;const E=(0,a.up)("q-btn"),D=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",o,[(0,a._)("div",i,[r,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.listOfAttendance,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a._)("div",u,[(0,a._)("span",null,(0,s.zw)(e.name),1),(0,a._)("span",null,(0,s.zw)(e.attendance)+" / "+(0,s.zw)(p.userInfo.eventList.length),1)])])))),128))])]),(0,a._)("div",d,[(0,a._)("span",null,[(null===(g=p.userInfo)||void 0===g||null===(w=g.eventList)||void 0===w?void 0:w.length)>0?((0,a.wg)(),(0,a.j4)(E,{key:0,round:"",color:"green",size:"sm",icon:"download",onClick:t[0]||(t[0]=e=>p.exportFile(p.userInfo.eventList,"events"))})):(0,a.kq)("",!0),(0,a.Wm)(E,{color:"purple",rounded:"",type:"button",class:"btn",size:"sm",onClick:t[1]||(t[1]=t=>e.$router.push("/add-event"))},{default:(0,a.w5)((()=>[c])),_:1})])]),(0,a._)("div",v,[(null===(b=p.userInfo.eventList)||void 0===b?void 0:b.length)>0?((0,a.wg)(),(0,a.j4)(D,{key:0,style:{width:"80%"},title:"Event List",rows:p.userInfo.eventList,columns:[{name:"name",label:"Event Name",required:!0,align:"center",field:e=>e.name},{name:"date",label:"Date of Event",required:!0,align:"center",field:e=>p.formatDate(e.date)}],flat:"",dark:"",bordered:"",onRowClick:p.showEventDetails},null,8,["rows","columns","onRowClick"])):((0,a.wg)(),(0,a.iD)("div",f,"Your Events will show here"))])])}n(6727);var m=n(1465);const p={name:"EventlistView",components:{},beforeMount(){"admin"==this.userInfo.role&&this.$router.push("/")},methods:{exportFile(e,t){let n=[{value:"Event Name",fontWeight:"bold"},{value:"Event Description",fontWeight:"bold"},{value:"Event Date",fontWeight:"bold"},{value:"Attendance Count",fontWeight:"bold"}];this.userInfo.teamList.forEach((e=>{n.push({fontWeight:"bold",value:e.name})}));let a=[n];e.forEach((e=>{let t=[{value:e.name},{value:e.desc},{value:e.date?this.formatDate(e.date):""},{value:e.attendanceList.length}];this.userInfo.teamList.forEach((n=>{t.push({value:e.attendanceList.includes(n.name)?"Present":"Absent"})})),a.push(t)})),(0,m.Z)(a,{fileName:t+".xlsx"})},formatDate(e){if(e&&new Date(e)){let t,n=new Date(e);const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=a[n.getMonth()];return t=n.getDate()+" "+s+", "+n.getFullYear(),t}return""},showEventDetails(e,t,n){this.$store.dispatch("selectEvent",t)}},computed:{userInfo(){return this.$store.getters.userData},listOfAttendance(){let e=[];return this.userInfo.teamList.forEach((t=>{e.push({name:t.name,attendance:0})})),this.userInfo.eventList.forEach((t=>{t.attendanceList.forEach((t=>{const n=e.findIndex((e=>e.name==t));e[n].attendance=e[n].attendance+1}))})),e}}};var g=n(1639),w=n(4455),b=n(9032),E=n(9984),D=n.n(E);const k=(0,g.Z)(p,[["render",h]]),y=k;D()(p,"components",{QBtn:w.Z,QTable:b.Z})}}]);
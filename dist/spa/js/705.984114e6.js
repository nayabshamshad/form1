"use strict";(globalThis["webpackChunkform1_quasar"]=globalThis["webpackChunkform1_quasar"]||[]).push([[705],{1029:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(9835),r=n(6970);const o={class:"container"},s={class:"attendance-container"},l={class:"attendance-summary"},i=(0,a._)("h5",{style:{"font-size":"18px"}},[(0,a._)("span",null,"Prezența")],-1),u={class:"flex justify-space-around"},d={class:"eventlist"},c=(0,a.Uk)(" Adaugă întâlnire "),m={style:{"margin-top":"1rem"},class:"flex justify-center"},h={key:1,style:{width:"60%"}};function v(e,t,n,v,f,p){var w,g,b;const C=(0,a.up)("q-btn"),L=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",s,[(0,a._)("div",l,[i,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.listOfAttendance,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a._)("div",u,[(0,a._)("span",null,(0,r.zw)(e.name),1),(0,a._)("span",null,(0,r.zw)(e.attendance)+" / "+(0,r.zw)(p.userInfo.eventList.length),1)])])))),128))])]),(0,a._)("div",d,[(0,a._)("span",null,[(null===(w=p.userInfo)||void 0===w||null===(g=w.eventList)||void 0===g?void 0:g.length)>0?((0,a.wg)(),(0,a.j4)(C,{key:0,round:"",color:"green",size:"sm",icon:"download",onClick:t[0]||(t[0]=e=>p.exportFile("events"))})):(0,a.kq)("",!0),(0,a.Wm)(C,{color:"purple",rounded:"",type:"button",class:"btn",size:"sm",onClick:t[1]||(t[1]=t=>e.$router.push("/add-event"))},{default:(0,a.w5)((()=>[c])),_:1})])]),(0,a._)("div",m,[(null===(b=p.userInfo.eventList)||void 0===b?void 0:b.length)>0?((0,a.wg)(),(0,a.j4)(L,{key:0,style:{width:"80%"},title:"Lista întâlnirilor",rows:p.sortedEvents,columns:[{name:"name",label:"Tema întâlnirii",required:!0,align:"center",field:e=>e.name},{name:"date",label:"Data întâlnirii",required:!0,align:"center",field:e=>p.formatDate(e.date)}],flat:"",dark:"",bordered:"",onRowClick:p.showEventDetails},null,8,["rows","columns","onRowClick"])):((0,a.wg)(),(0,a.iD)("div",h,"Toate întâlnirile vor aparea aici"))])])}var f=n(1465);const p={name:"EventlistView",components:{},beforeMount(){"admin"==this.userInfo.role&&this.$router.push("/")},methods:{exportFile(e){let t=[[],[],[{value:"Short Summary - "+this.userInfo.name,span:2,align:"center",borderColor:"#000000",rightBorderColor:"#58eb34"}],[{value:"Numele copilului",borderColor:"#000000"},{value:"Numar de prezențe/Numar de întâlniri",borderColor:"#000000"}]];this.listOfAttendance.forEach((e=>{t.push([{value:e.name,borderColor:"#000000"},{value:e.attendance+"/"+this.userInfo.eventList.length,borderColor:"#000000"}])})),(0,f.Z)(t,{fileName:e+".xlsx"})},formatDate(e){if(e&&new Date(e)){let t,n=new Date(e);const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=a[n.getMonth()];return t=n.getDate()+" "+r+", "+n.getFullYear(),t}return""},showEventDetails(e,t,n){this.$store.dispatch("selectEvent",t)}},computed:{sortedEvents(){let e=[],t=[];return this.userInfo.eventList.length>0&&(this.userInfo.eventList.forEach((e=>{t.push(e)})),e=t.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0))),e},userInfo(){return this.$store.getters.userData},listOfAttendance(){let e=[];return this.userInfo.teamList.forEach((t=>{e.push({name:t.name,attendance:0})})),this.userInfo.eventList.forEach((t=>{t.attendanceList.forEach((t=>{const n=e.findIndex((e=>e.name==t));e[n].attendance=e[n].attendance+1}))})),e.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0))}}};var w=n(1639),g=n(4455),b=n(9032),C=n(9984),L=n.n(C);const k=(0,w.Z)(p,[["render",v]]),y=k;L()(p,"components",{QBtn:g.Z,QTable:b.Z})}}]);
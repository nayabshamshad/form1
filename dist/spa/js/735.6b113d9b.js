"use strict";(globalThis["webpackChunkform1_quasar"]=globalThis["webpackChunkform1_quasar"]||[]).push([[735],{1735:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ee});var i=s(9835),a=s(6970),l=s(1957);const r=(0,i.Uk)(" Data"),n={class:"container"},d={class:"container"},o={class:"flex justify-end q-pr-sm"},c={class:"flex no-wrap"},u={class:"userImg"},h=["src"],m={key:1},g={class:"userInfoText"},p={class:"infoRow"},v={class:"shadowed"},w=(0,i._)("h3",null,"Gen:",-1),_=(0,i._)("h3",null,"Data nașterii:",-1),f=(0,i._)("h3",null,"Mărime tricou:",-1),U={class:"text-uppercase"},b={class:"shadowed skills"},y=(0,i._)("h3",null,"Specializări",-1),L={class:"shadowed user-details q-mt-md"},C=(0,i._)("h3",null,"Categorie:",-1),P=(0,i._)("h3",null,"Zonă:",-1),k=(0,i._)("h3",null,"Comunitate:",-1),z=(0,i._)("h3",null,"Clubul:",-1),D=(0,i._)("h3",null,"Anul investiturii ca:",-1),I=(0,i._)("span",null,"Instructor: ",-1),x=(0,i._)("span",null,"Ghid: ",-1),q=(0,i._)("span",null,"Master Ghid:",-1),S={class:"shadowed q-mt-md"},M=(0,i._)("h2",null,"Lista Copiilor",-1),O={class:"children-list"},W={key:0,class:"table-container q-mt-lg"},G={style:{width:"100%"},class:"user-list-table"},N=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Name"),(0,i._)("th",null,"Phone"),(0,i._)("th",null,"Email")])],-1),T={class:"table-row"},Z=["onClick"],$=["onClick"],Q=["onClick"],B=["onClick"],V={class:"container"},j={class:"attendance-container shadowed"},E={class:"attendance-summary"},A=(0,i._)("h4",{style:{color:"#233975"}},"Prezența",-1),F={class:"shadowed",style:{"border-radius":"0.3rem","margin-top":"1rem"}},J={class:"flex justify-space-between"},R={class:"attendance-container shadowed",style:{"margin-top":"1rem"}},K={class:"attendance-summary"},Y=(0,i._)("h4",{style:{color:"#233975"}},"Lista întâlnirilor",-1),H={class:"eventlist"},X={class:"q-mb-md download-button-event q-mt-sm flex justify-between",style:{width:"80%"}},ee={class:"table-container"},te={key:0,class:"user-list-table lista"},se=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Titlul întâlnirii"),(0,i._)("th",{style:{"text-align":"end"}},"Data Intalnirii")])],-1),ie={class:"table-row"},ae=["onClick"],le={class:"event-date-td"},re={key:1,class:"shadowed q-mx-auto",style:{"border-radius":"8px",width:"90%"}},ne=(0,i._)("h4",{class:"text-weight-bold linkcolor text-left",style:{opacity:"0.5"}}," Nu există întâlniri încă ",-1),de=[ne],oe={class:"q-mt-md inline-pagination"},ce={style:{display:"inline-flex"}},ue=(0,i._)("span",null,"Întâlniri pe pagină",-1),he=(0,i._)("option",{value:5},"5",-1),me=(0,i._)("option",{value:10},"10",-1),ge=(0,i._)("option",{value:20},"20",-1),pe=(0,i._)("option",{value:50},"50",-1),ve=[he,me,ge,pe],we={class:"pagination-buttons"},_e={class:"flex justify-center"},fe={class:"flex",style:{"justify-content":"flex-end",width:"70%","margin-top":"1rem","min-width":"200px"}},Ue=(0,i._)("div",{class:"text-h6"},"Alertă",-1);function be(e,t,s,ne,he,me){const ge=(0,i.up)("q-tab"),pe=(0,i.up)("q-tabs"),be=(0,i.up)("q-btn"),ye=(0,i.up)("q-icon"),Le=(0,i.up)("q-tab-panel"),Ce=(0,i.up)("q-date"),Pe=(0,i.up)("q-tab-panels"),ke=(0,i.up)("q-card-section"),ze=(0,i.up)("q-card-actions"),De=(0,i.up)("q-card"),Ie=(0,i.up)("q-dialog"),xe=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(De,{class:"my-card info sign-in user-details",style:{"padding-top":"0","padding-left":"0","padding-right":"0"}},{default:(0,i.w5)((()=>[(0,i.Wm)(ke,{class:"q-px-none q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(pe,{"indicator-color":"transparent","active-class":"remove-border",align:"justify",class:"linkcolor q-mb-md admin-tabs user-detail-tab",modelValue:he.tabs,"onUpdate:modelValue":t[0]||(t[0]=e=>he.tabs=e)},{default:(0,i.w5)((()=>{var e;return[(0,i.Wm)(ge,{name:"user",label:"Informații utilizator"}),me.selectedUser.status&&null!==(e=me.selectedUser)&&void 0!==e&&e.isUpdated&&1==me.selectedUser.isAuthorized?((0,i.wg)(),(0,i.j4)(ge,{key:0,name:"events",label:"Întâlnirile"})):(0,i.kq)("",!0),"department"===me.selectedUser.role?((0,i.wg)(),(0,i.j4)(ge,{key:1,name:"date"},{default:(0,i.w5)((()=>[r])),_:1})):(0,i.kq)("",!0)]})),_:1},8,["modelValue"]),(0,i.Wm)(Pe,{style:{"padding-left":"3rem","padding-right":"3rem"},modelValue:he.tabs,"onUpdate:modelValue":t[5]||(t[5]=e=>he.tabs=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(Le,{name:"user"},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i._)("div",d,[(0,i._)("div",o,[(0,i.Wm)(be,{round:"",onClick:t[1]||(t[1]=t=>e.$router.push("/edit-profile")),icon:"edit_note",class:"bg-linkcolor"})]),(0,i._)("div",c,[(0,i._)("div",u,[me.selectedUser.imgUrl&&""!==me.selectedUser.imgUrl?((0,i.wg)(),(0,i.iD)("img",{key:0,src:me.selectedUser.imgUrl,alt:""},null,8,h)):((0,i.wg)(),(0,i.iD)("div",m,[(0,i.Wm)(ye,{class:"text-grey",name:"photo_camera"})]))]),(0,i._)("div",g,[(0,i._)("h4",null,(0,a.zw)(me.selectedUser.name),1),(0,i._)("p",{style:(0,a.j5)(me.selectedUser.status||"department"==me.selectedUser.role?"color: green":"color: red")},(0,a.zw)(me.selectedUser.status||"department"==me.selectedUser.role?"Activ":"Inactiv"),5),(0,i._)("div",null,[(0,i._)("p",null,(0,a.zw)(me.selectedUser.phoneNumber),1),(0,i._)("p",null,(0,a.zw)(me.selectedUser.email),1)])])]),(0,i._)("div",p,[(0,i._)("div",v,[(0,i._)("div",null,[w,(0,i._)("span",null,(0,a.zw)(me.selectedUser.gender),1)]),(0,i._)("div",null,[_,(0,i._)("span",null,(0,a.zw)(me.selectedUser.dateOfBirth?me.formatTheDate(me.selectedUser.dateOfBirth):""),1)]),(0,i._)("div",null,[f,(0,i._)("span",U,(0,a.zw)(me.selectedUser.size),1)])]),(0,i._)("div",b,[y,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(me.selectedUser.tagList,((e,t)=>((0,i.wg)(),(0,i.iD)("p",{key:t},(0,a.zw)(e),1)))),128))])])]),(0,i._)("div",L,[(0,i._)("div",null,[C,(0,i._)("p",null,(0,a.zw)(me.selectedUser.category),1)]),(0,i._)("div",null,[P,(0,i._)("p",null,(0,a.zw)(me.selectedUser.region),1)]),(0,i._)("div",null,[k,(0,i._)("p",null,(0,a.zw)(me.selectedUser.state),1)]),(0,i._)("div",null,[z,(0,i._)("p",null,(0,a.zw)(me.selectedUser.clubName),1)]),(0,i._)("div",null,[D,(0,i._)("div",null,[I,(0,i._)("span",null,(0,a.zw)(""!==me.selectedUser.Instructor?me.selectedUser.Instructor:"-"),1)]),(0,i._)("div",null,[x,(0,i._)("span",null,(0,a.zw)(""!==me.selectedUser.Ghid?me.selectedUser.Ghid:"-"),1)]),(0,i._)("div",null,[q,(0,i._)("span",null,(0,a.zw)(""!==me.selectedUser.masterGhid?me.selectedUser.masterGhid:"-"),1)])])]),(0,i.wy)((0,i._)("div",S,[M,(0,i._)("div",O,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(me.sortedTeam,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"section"},(0,a.zw)(e.name),1)))),128))])],512),[[l.F8,me.selectedUser.status]]),"department"===me.selectedUser.role&&me.departmentUserList.length>0?((0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("table",G,[N,(0,i._)("tbody",T,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(me.departmentUserList,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[(0,i._)("td",null,(0,a.zw)(e.name),1),(0,i._)("td",{class:"hideMobile",onClick:t=>me.callUser(e.phoneNumber)},(0,a.zw)(e.phoneNumber),9,Z),(0,i._)("td",{class:"showMobile",onClick:t=>me.callUser(e.phoneNumber)},[(0,i.Wm)(ye,{name:"phone"})],8,$),(0,i._)("td",{onClick:t=>me.mailUser(e.email),class:"hideMobile last"},(0,a.zw)(e.email),9,Q),(0,i._)("td",{onClick:t=>me.mailUser(e.email),class:"showMobile last"},[(0,i.Wm)(ye,{name:"email"})],8,B)])))),128))])])])):(0,i.kq)("",!0)])])])),_:1}),(0,i.Wm)(Le,{class:"user-event-container",name:"events"},{default:(0,i.w5)((()=>[(0,i._)("div",V,[(0,i._)("div",j,[(0,i._)("div",E,[A,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(me.listOfAttendance,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i._)("div",F,[(0,i._)("div",J,[(0,i._)("span",null,(0,a.zw)(e.name),1),(0,i._)("span",null,(0,a.zw)(e.attendance)+" / "+(0,a.zw)(me.selectedUser.eventList.length),1)])])])))),128))])]),(0,i._)("div",R,[(0,i._)("div",K,[Y,(0,i._)("div",H,[(0,i._)("div",X,[(0,i.Wm)(be,{size:"md",color:"green",icon:"download",onClick:t[2]||(t[2]=e=>me.exportFile("events")),round:""})])]),(0,i._)("div",ee,[me.selectedUser.eventList.length>0?((0,i.wg)(),(0,i.iD)("table",te,[se,(0,i._)("tbody",ie,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(me.eventList.arr,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{class:"shadowed tr",key:t,onClick:t=>me.showEventDetails(e)},[(0,i._)("td",null,(0,a.zw)(e.name),1),(0,i._)("td",le,(0,a.zw)(me.getBirthDate(e.date)),1)],8,ae)))),128))])])):((0,i.wg)(),(0,i.iD)("div",re,de))]),(0,i._)("div",oe,[(0,i._)("div",ce,[ue,(0,i.wy)((0,i._)("select",{class:"paginationSelect","onUpdate:modelValue":t[3]||(t[3]=e=>he.resultsPerPage=e)},ve,512),[[l.bM,he.resultsPerPage]])]),(0,i._)("div",null,[(0,i._)("div",we,[(0,i.Wm)(be,{size:"sm",round:"","text-color":"white",icon:"chevron_left","no-caps":"",onClick:me.decreasePage,disabled:1===he.currentPage},null,8,["onClick","disabled"]),(0,i._)("span",null,(0,a.zw)(he.currentPage),1),(0,i.Wm)(be,{size:"sm",round:"","text-color":"white",onClick:me.increasePage,"no-caps":"",icon:"chevron_right",disabled:he.currentPage>=me.maxPage},null,8,["onClick","disabled"])])]),(0,i._)("div",null,[(0,i._)("p",null,(0,a.zw)(me.eventList.first)+"-"+(0,a.zw)(me.eventList.last)+" din "+(0,a.zw)(me.eventList.total),1)])])])])])])),_:1}),(0,i.Wm)(Le,{name:"date"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",_e,[(0,i.Wm)(Ce,{modelValue:he.dateModel,"onUpdate:modelValue":t[4]||(t[4]=e=>he.dateModel=e),range:""},null,8,["modelValue"])]),(0,i._)("div",fe,[(0,i.Wm)(be,{round:"",icon:"check",color:"green",loading:he.dateSetting,onClick:me.setDate},null,8,["loading","onClick"])])])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(Ie,{modelValue:he.errorDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>he.errorDialog=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(De,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ke,null,{default:(0,i.w5)((()=>[Ue])),_:1}),(0,i.Wm)(ke,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(he.error),1)])),_:1}),(0,i.Wm)(ze,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(be,{flat:"",label:"OK",color:"primary"},null,512),[[xe]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}s(702),s(4641),s(3269);var ye=s(1465),Le=s(3926);const Ce={data(){return{tabs:"user",dateModel:{from:"2020/07/08",to:"2020/07/17"},dateOfBirth:"",dataUser:{},isEdit:!1,isSubmitting:!1,errorDialog:!1,dateSetting:!1,error:"Te rugăm să reverifici datele introduse.",tagsInput:"",teamList:"",sizeOptions:["S","M","L","XL","XXL"],resultsPerPage:20,currentPage:1,previewImage:"",file:null}},async mounted(){await this.pageSetup()},methods:{removeImg(){this.previewImage=""},async handleImageUpload(e){const t=e.target.files[0];this.previewImage=URL.createObjectURL(t),this.file=t},showImgInput(){this.$refs.imgInput.click()},async pageSetup(){var e,t,s,i,a;this.selectedUser&&(this.dataUser=JSON.parse(JSON.stringify(this.selectedUser)),this.selectedUser.date&&(this.dateModel.to=this.selectedUser.date.to,this.dateModel.from=this.selectedUser.date.from)),this.tagsInput=null===(e=this.dataUser)||void 0===e||null===(t=e.tagList)||void 0===t?void 0:t.join(",");let l=[];if(null===(s=this.dataUser)||void 0===s||null===(i=s.teamList)||void 0===i||i.forEach((e=>{l.push(e)})),this.teamList=l,null!==(a=this.dataUser)&&void 0!==a&&a.dateOfBirth){let e=this.dataUser.dateOfBirth.split("/");this.dateOfBirth=e[2]+"/"+e[1]+"/"+e[0]}this.selectedUser.date&&(this.dateModel.to=this.selectedUser.date.to,this.dateModel.from=this.selectedUser.date.from)},formatTheDate(e){return e.split("/").reverse().join(".")},increasePage(){this.currentPage<this.maxPage&&(this.currentPage=this.currentPage+1)},decreasePage(){this.currentPage>1&&(this.currentPage=this.currentPage-1)},async setDate(){this.dateSetting||(this.dateModel?(this.dateSetting=!0,await this.$store.dispatch("setDateRange",{date:this.dateModel,uid:this.selectedUser.uid}),this.dateSetting=!1):this.$q.notify({color:"red",message:"Te rugăm să introduci corect data."}))},callUser(e){""!=e&&window.open(`tel: ${e}`)},mailUser(e){""!=e&&window.open(`mailto: ${e}`)},exportFile(e){let t=[[],[],[{value:"Short Summary - "+this.selectedUser.name,span:2,align:"center",borderColor:"#000000",rightBorderColor:"#58eb34"}],[{value:"Numele copilului",borderColor:"#000000"},{value:"Numar de prezențe/Numar de întâlniri",borderColor:"#000000"}]];this.listOfAttendance.forEach((e=>{t.push([{value:e.name,borderColor:"#000000"},{value:e.attendance+"/"+this.selectedUser.eventList.length,borderColor:"#000000"}])})),(0,ye.Z)(t,{fileName:e+".xlsx"})},openModal(){this.$refs.dateIcon.$el.click(),this.$refs.dateIcon.$el.focus()},handleDateChange(e,t,s){let i=1==`${s.day}`.length?"0"+s.day:s.day,a=1==`${s.month}`.length?"0"+s.month:s.month;this.dateOfBirth=i+"/"+a+"/"+s.year},getBirthDate(e){let t,s=new Date(e);const i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=i[s.getMonth()];return t=s.getDate()+" "+a+", "+s.getFullYear(),t},async submit(){if(this.isSubmitting)return;let e;if(this.isSubmitting=!0,""!=this.previewImage){this.dataUser.imgUrl&&""!=this.dataUser.imgUrl&&await Le.hs.refFromURL(this.dataUser.imgUrl).delete().then().catch((e=>{console.log(e)}));const e=new Date+"-"+this.file.name;await Le.tO.child(e).put(this.file,{contentType:this.file.type}).then((e=>e.ref.getDownloadURL())).then((e=>{this.dataUser.imgUrl=e}))}if(e={...this.dataUser},""!=this.tagsInput){if(this.tagsInput.split(",").length>5)return this.error="Nu poți să introduci mai mult de 5 specializări!",this.errorDialog=!0,void(this.isSubmitting=!1);e.tagList=this.tagsInput.split(",")}if(14!==e.phoneNumber.length)return this.$q.notify({message:"Te rugăm să introduci un număr de telefon valid.",color:"red"}),void(this.isSubmitting=!1);e.isUpdated=!0,e.status||(e.teamList=[]);var t=!1;return e.status&&(e.teamList=this.teamList,e.teamList.forEach((e=>{""==e.name&&(t=!0)}))),t?(this.isSubmitting=!1,this.errorDialog=!0,void(this.error="Verificați lista cu copii.")):e.tagList.length<1?(this.errorDialog=!0,this.error="Trebuie să introduci minim o specializare",void(this.isSubmitting=!1)):""==e.dateOfBirth||""==e.region||""==e.state||""==e.gender||""==e.etnic||""==e.clubName||""==e.category||""==e.size?(this.errorDialog=!0,this.error="Te rugăm să reverifici datele introduse.",void(this.isSubmitting=!1)):4!==e.Instructor.length&&""!=e.Instructor||4!==e.Ghid.length&&""!=e.Ghid||4!==e.masterGhid.length&&""!=e.masterGhid?(this.$q.notify({color:"red",message:"Formatul anului introdus este incorect."}),void(this.isSubmitting=!1)):e.Instructor>e.Ghid&&""!=e.Instructor&&""!=e.Ghid||e.Ghid>e.masterGhid&&""!=e.Ghid&&""!=e.masterGhid||e.Instructor>e.masterGhid&&""!=e.instructor&&""!=e.masterGhid?(this.$q.notify({color:"red",message:"Te rugăm să verifici ordinea investiturii ca Instructor, Ghid, Master Ghid."}),void(this.isSubmitting=!1)):(await this.$store.dispatch("updateUserProfileAdmin",e),await this.pageSetup(),this.previewImage="",this.isSubmitting=!1,void(this.isEdit=!1))},addMember(){this.teamList.push({name:""})},removeMember(e){this.teamList.length>1?this.teamList.splice(e,1):(this.errorDialog=!0,this.error="Trebuie să completezi lista cu copii.")},showEventDetails(e){this.$store.dispatch("selectEvent",e)}},computed:{sortedTeam(){let e=[],t=[];return this.selectedUser.teamList.length>0&&(this.selectedUser.teamList.forEach((e=>{t.push(e)})),e=t.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0))),e},eventList(){let e=(this.currentPage-1)*this.resultsPerPage;const t=this.selectedUser.eventList.filter(((t,s)=>s>=e&&s<e+this.resultsPerPage)).sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0));return{arr:t,first:e+1,total:this.selectedUser.eventList.length,last:this.currentPage==this.maxPage?this.selectedUser.eventList.length:this.currentPage>this.maxPage?1:e+this.resultsPerPage}},maxPage(){const e=this.selectedUser.eventList;return Math.ceil(e.length/this.resultsPerPage)},departmentUserList(){if("department"===this.selectedUser.role){const e=this.$store.getters.userList.filter((e=>e.department===this.selectedUser.departmentName));return e}return[]},selectedUser(){return this.$store.getters.selectedUser},listOfAttendance(){let e=[];this.selectedUser.teamList.forEach((t=>{e.push({name:t.name,attendance:0})})),this.selectedUser.eventList.forEach((t=>{t.attendanceList.forEach((t=>{const s=e.findIndex((e=>e.name==t));s>-1&&(e[s].attendance=e[s].attendance+1)}))}));const t=e.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0));return t}},watch:{selectedUser:{handler:function(){var e;if(this.dataUser=JSON.parse(JSON.stringify(this.selectedUser)),null!==(e=this.dataUser)&&void 0!==e&&e.dateOfBirth){let e=this.dataUser.dateOfBirth.split("/");this.dateOfBirth=e[2]+"/"+e[1]+"/"+e[0]}}},resultsPerPage:{handler:function(){this.currentPage=1}}}};var Pe=s(1639),ke=s(4458),ze=s(3190),De=s(3555),Ie=s(900),xe=s(9800),qe=s(4106),Se=s(4455),Me=s(2857),Oe=s(7743),We=s(9812),Ge=s(1480),Ne=s(6611),Te=s(2765),Ze=s(7088),$e=s(1821),Qe=s(2146),Be=s(9984),Ve=s.n(Be);const je=(0,Pe.Z)(Ce,[["render",be]]),Ee=je;Ve()(Ce,"components",{QCard:ke.Z,QCardSection:ze.Z,QTabs:De.Z,QTab:Ie.Z,QTabPanels:xe.Z,QTabPanel:qe.Z,QBtn:Se.Z,QIcon:Me.Z,QDialog:Oe.Z,QSelect:We.Z,QRadio:Ge.Z,QInput:Ne.Z,QPopupProxy:Te.Z,QDate:Ze.Z,QCardActions:$e.Z}),Ve()(Ce,"directives",{ClosePopup:Qe.Z})}}]);
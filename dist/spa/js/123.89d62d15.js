"use strict";(globalThis["webpackChunkform1_quasar"]=globalThis["webpackChunkform1_quasar"]||[]).push([[123],{8123:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Kt});var a=i(9835);function l(e,t,i,l,s,n){var r,o;const d=(0,a.up)("teamHome"),u=(0,a.up)("adminHome");return"admin"!==(null===(r=n.userData)||void 0===r?void 0:r.role)&&"department"!==(null===(o=n.userData)||void 0===o?void 0:o.role)?((0,a.wg)(),(0,a.j4)(d,{key:0})):((0,a.wg)(),(0,a.j4)(u,{key:1}))}var s=i(1957),n=i(6970);const r={class:"container"},o={class:"flex justify-end"},d={class:"flex no-wrap"},u={class:"userImg"},c=["src"],h={key:1},m={class:"userInfoText"},p={class:"infoRow"},g={class:"shadowed"},v=(0,a._)("h3",null,"Gen:",-1),_=(0,a._)("h3",null,"Data nașterii:",-1),w=(0,a._)("h3",null,"Mărime tricou:",-1),f={class:"text-uppercase"},b={class:"shadowed skills"},P=(0,a._)("h3",null,"Specializări",-1),D={class:"shadowed q-mt-md user-details",style:{display:"inline-flex",width:"100%",gap:"10%",padding:"1.5rem"}},k=(0,a._)("h3",null,"Categorie:",-1),U=(0,a._)("h3",null,"Zonă:",-1),C=(0,a._)("h3",null,"Comunitate:",-1),y=(0,a._)("h3",null,"Clubul:",-1),z=(0,a._)("h3",null,"Anul investiturii ca:",-1),L=(0,a._)("span",null,"Instructor:",-1),x=(0,a.Uk)(),W=(0,a._)("span",null,"Ghid:",-1),N=(0,a.Uk)(),$=(0,a._)("span",null,"Master Ghid:",-1),q=(0,a.Uk)(),M={class:"shadowed q-mt-md"},I=(0,a._)("h2",null,"Lista Copiilor",-1),A={class:"children-list"},S=(0,a._)("div",{class:"flex",style:{"justify-content":"flex-end",padding:"0 30%"}},null,-1),Z=(0,a._)("div",{class:"text-h6"},"Alertă",-1);function V(e,t,i,l,V,T){const G=(0,a.up)("q-btn"),Q=(0,a.up)("q-icon"),j=(0,a.up)("q-card-section"),O=(0,a.up)("q-card-actions"),B=(0,a.up)("q-card"),F=(0,a.up)("q-dialog"),E=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(B,{class:"my-card info"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("div",o,[(0,a.wy)((0,a.Wm)(G,{round:"",onClick:t[0]||(t[0]=t=>e.$router.push("/edit-profile")),icon:"edit_note",class:"bg-linkcolor"},null,512),[[s.F8,V.dateContained]])]),(0,a._)("div",d,[(0,a._)("div",u,[""!==T.userData.imgUrl?((0,a.wg)(),(0,a.iD)("img",{key:0,src:T.userData.imgUrl,alt:""},null,8,c)):((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(Q,{class:"text-grey",name:"photo_camera"})]))]),(0,a._)("div",m,[(0,a._)("h4",null,(0,n.zw)(T.userData.name),1),(0,a._)("p",{style:(0,n.j5)(T.userData.status?"color: green":"color: red")},(0,n.zw)(T.userData.status?"Activ":"Inactiv"),5),(0,a._)("div",null,[(0,a._)("p",null,(0,n.zw)(T.userData.phoneNumber),1),(0,a._)("p",null,(0,n.zw)(T.userData.email),1)])])]),(0,a._)("div",p,[(0,a._)("div",g,[(0,a._)("div",null,[v,(0,a._)("span",null,(0,n.zw)(T.userData.gender),1)]),(0,a._)("div",null,[_,(0,a._)("span",null,(0,n.zw)(T.userData.dateOfBirth?T.formatTheDate(T.userData.dateOfBirth):""),1)]),(0,a._)("div",null,[w,(0,a._)("span",f,(0,n.zw)(T.userData.size),1)])]),(0,a._)("div",b,[P,(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(T.userData.tagList,((e,t)=>((0,a.wg)(),(0,a.iD)("p",{key:t},(0,n.zw)(e),1)))),128))])])]),(0,a._)("div",D,[(0,a._)("div",null,[k,(0,a._)("p",null,(0,n.zw)(T.userData.category),1)]),(0,a._)("div",null,[U,(0,a._)("p",null,(0,n.zw)(T.userData.region),1)]),(0,a._)("div",null,[C,(0,a._)("p",null,(0,n.zw)(T.userData.state),1)]),(0,a._)("div",null,[y,(0,a._)("p",null,(0,n.zw)(T.userData.clubName),1)]),(0,a._)("div",null,[z,(0,a._)("div",null,[L,x,(0,a._)("span",null,(0,n.zw)(T.userData.Instructor),1)]),(0,a._)("div",null,[W,N,(0,a._)("span",null,(0,n.zw)(T.userData.Ghid),1)]),(0,a._)("div",null,[$,q,(0,a._)("span",null,(0,n.zw)(T.userData.masterGhid),1)])])]),(0,a.wy)((0,a._)("div",M,[I,(0,a._)("div",A,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(T.teamListSorted,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"section"},(0,n.zw)(e.name),1)))),128))])],512),[[s.F8,T.userData.status]])]),(0,a.Wm)(F,{modelValue:V.errorDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>V.errorDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[S,Z])),_:1}),(0,a.Wm)(j,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(V.error),1)])),_:1}),(0,a.Wm)(O,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(G,{flat:"",label:"OK",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}i(702),i(4641),i(3269);var T=i(3926);const G={name:"HomeView",components:{},methods:{removeImg(){this.previewImage=""},async handleImageUpload(e){const t=e.target.files[0];this.previewImage=URL.createObjectURL(t),this.file=t},showImgInput(){this.$refs.imgInput.click()},formatTheDate(e){return e.split("/").reverse().join(".")},openModal(){this.$refs.dateIcon.$el.click(),this.$refs.dateIcon.$el.focus()},handleDateChange(e,t,i){let a=1==`${i.day}`.length?"0"+i.day:i.day,l=1==`${i.month}`.length?"0"+i.month:i.month;this.dateOfBirth=a+"/"+l+"/"+i.year},getBirthDate(e){let t,i=new Date(e);const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=a[i.getMonth()];return t=i.getDate()+" "+l+", "+i.getFullYear(),t},addMember(){this.teamList.push({name:""})},removeMember(e){this.teamList.length>1?this.teamList.splice(e,1):(this.errorDialog=!0,this.error="Te rugăm să completezi lista cu copii.")},async submit(){if(this.isSubmitting)return;if(""!=this.previewImage){this.dataUser.imgUrl&&""!=this.dataUser.imgUrl&&await T.hs.refFromURL(this.dataUser.imgUrl).delete().then().catch((e=>{console.log(e)}));const e=new Date+"-"+this.file.name;await T.tO.child(e).put(this.file,{contentType:this.file.type}).then((e=>e.ref.getDownloadURL())).then((e=>{this.dataUser.imgUrl=e}))}let e;if(this.isSubmitting=!0,e={...this.dataUser},e.teamList=this.teamList,""!=this.tagsInput){if(this.tagsInput.split(",").length>5)return this.error="Nu poți să introduci mai mult de 5 specializări.",this.errorDialog=!0,void(this.isSubmitting=!1);if(14!==e.phoneNumber.length)return this.$q.notify({color:"red",message:"Te rugăm să introduci număr de telefon valid"}),void(this.isSubmitting=!1);e.tagList=this.tagsInput.split(",")}e.isUpdated=!0,e.status||(e.teamList=[]);var t=!1;if(e.status){var i,a;if(e.teamList.length<1)return this.error="Te rugăm să completezi lista cu copii.",this.errorDialog=!0,void(this.isSubmitting=!1);null===(i=e)||void 0===i||null===(a=i.teamList)||void 0===a||a.forEach((e=>{""==e.name&&(t=!0)}))}return t?(this.isSubmitting=!1,this.errorDialog=!0,void(this.error="Verificați lista cu copii.")):e.tagList.length<1?(this.errorDialog=!0,this.error="Te rugăm să introduci minim o specializare.",void(this.isSubmitting=!1)):""==e.dateOfBirth||""==e.region||""==e.state||""==e.gender||""==e.etnic||""==e.clubName||""==e.category||""==e.size?(this.errorDialog=!0,this.error="Te rugăm să reverifici datele introduse.",void(this.isSubmitting=!1)):4!==e.Instructor.length&&""!=e.Instructor||4!==e.Ghid.length&&""!=e.Ghid||4!==e.masterGhid.length&&""!=e.masterGhid?(this.$q.notify({color:"red",message:"Formatul anului introdus este incorect"}),void(this.isSubmitting=!1)):e.Instructor>e.Ghid&&""!=e.Instructor&&""!=e.Ghid||e.Ghid>e.masterGhid&&""!=e.Ghid&&""!=e.masterGhid||e.Instructor>e.masterGhid&&""!=e.instructor&&""!=e.masterGhid?(this.$q.notify({color:"red",message:"Te rugăm să verifici ordinea investiturii ca Instructor, Ghid, Master Ghid."}),void(this.isSubmitting=!1)):(await this.$store.dispatch("updateUserProfile",e),this.isEdit=!1,void(this.isSubmitting=!1))}},data(){return{isEdit:!1,dataUser:{},dateContained:!1,editDate:{start:"09/01/2022",end:"10/01/2022"},dateOfBirth:"",errorDialog:!1,error:"",isSubmitting:!1,tagsInput:"",sizeOptions:["S","M","L","XL","XXL"],teamList:[{name:""}],previewImage:"",file:null}},mounted(){var e,t,i,a,l,s,n,r;new Date(null===(e=this.dateList)||void 0===e?void 0:e.from).getTime()<=(new Date).getTime()&&new Date(null===(t=this.dateList)||void 0===t?void 0:t.to).getTime()>=(new Date).getTime()?this.dateContained=!0:this.dateContained=!1,T.I8.currentUser&&0==(null===(i=this.$store.getters.userData)||void 0===i?void 0:i.isUpdated)&&this.$router.push("/category-list"),this.dataUser={...this.userData},this.tagsInput=null===(a=this.dataUser)||void 0===a||null===(l=a.tagList)||void 0===l?void 0:l.join(",");let o=[];if(null===(s=this.dataUser)||void 0===s||null===(n=s.teamList)||void 0===n||n.forEach((e=>{o.push(e)})),this.teamList=o,null!==(r=this.dataUser)&&void 0!==r&&r.dateOfBirth){let e=this.dataUser.dateOfBirth.split("/");this.dateOfBirth=e[2]+"/"+e[1]+"/"+e[0]}},watch:{userData:{handler:function(){var e,t,i,a,l,s;0==(null===(e=this.$store.getters.userData)||void 0===e?void 0:e.isUpdated)&&this.$router.push("/category-list"),this.dataUser={...this.userData},this.tagsInput=null===(t=this.dataUser)||void 0===t||null===(i=t.tagList)||void 0===i?void 0:i.join(",");let n=[];if(null===(a=this.dataUser)||void 0===a||null===(l=a.teamList)||void 0===l||l.forEach((e=>{n.push(e)})),this.teamList=n,null!==(s=this.dataUser)&&void 0!==s&&s.dateOfBirth){let e=this.dataUser.dateOfBirth.split("/");this.dateOfBirth=e[2]+"/"+e[1]+"/"+e[0]}},dateList:{handler:function(){var e,t;new Date(null===(e=this.dateList)||void 0===e?void 0:e.from).getTime()<=(new Date).getTime()&&new Date(null===(t=this.dateList)||void 0===t?void 0:t.to).getTime()>=(new Date).getTime()?this.dateContained=!0:this.dateContained=!1}}}},computed:{teamListSorted(){let e=[],t=[];return this.userData&&this.userData.teamList&&this.userData.teamList.length>0&&(this.userData.teamList.forEach((e=>{t.push(e)})),e=t.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0))),e},userData(){return this.$store.getters.userData?this.$store.getters.userData:{}},dateList(){return this.$store.getters.dateList}}};var Q=i(1639),j=i(4458),O=i(3190),B=i(4455),F=i(2857),E=i(7743),H=i(9812),Y=i(1480),R=i(6611),K=i(2765),J=i(7088),X=i(1821),ee=i(2146),te=i(9984),ie=i.n(te);const ae=(0,Q.Z)(G,[["render",V]]),le=ae;ie()(G,"components",{QCard:j.Z,QCardSection:O.Z,QBtn:B.Z,QIcon:F.Z,QDialog:E.Z,QSelect:H.Z,QRadio:Y.Z,QInput:R.Z,QPopupProxy:K.Z,QDate:J.Z,QCardActions:X.Z}),ie()(G,"directives",{ClosePopup:ee.Z});const se={class:"container"},ne={class:"flex flex-btn"},re=(0,a._)("h5",{class:"showMobile"},"Aprobat",-1),oe={class:"media-select"},de={class:"table-container"},ue={class:"user-list-table approved"},ce=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Nume/Prenume"),(0,a._)("th",null,"Nr. de telefon"),(0,a._)("th",null,"E-mail")])],-1),he={class:"table-row"},me=["onClick"],pe=["onClick"],ge=["onClick"],ve=["onClick"],_e=["onClick"],we={class:"q-mt-md inline-pagination"},fe={class:"hide-pagination",style:{display:"inline-flex"}},be=(0,a._)("span",null,"Întâlniri pe pagină",-1),Pe=(0,a._)("option",{value:5},"5",-1),De=(0,a._)("option",{value:10},"10",-1),ke=(0,a._)("option",{value:20},"20",-1),Ue=(0,a._)("option",{value:50},"50",-1),Ce=[Pe,De,ke,Ue],ye={class:"pagination-buttons"},ze=(0,a._)("template",null,null,-1),Le={class:"flex flex-btn"},xe=(0,a._)("h5",{class:"showMobile"},"În așteptare",-1),We={class:"media-select"},Ne={class:"table-container"},$e={class:"user-list-table pending"},qe=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Nume/Prenume"),(0,a._)("th",null,"Nr. de telefon"),(0,a._)("th",null,"E-mail"),(0,a._)("th",null,"Acțiune")])],-1),Me={class:"table-row"},Ie=["onClick"],Ae=["onClick"],Se=["onClick"],Ze=["onClick"],Ve=["onClick"],Te={class:"icon"},Ge={class:"q-mt-md inline-pagination"},Qe={class:"hide-pagination",style:{display:"inline-flex"}},je=(0,a._)("span",null,"Întâlniri pe pagină",-1),Oe=(0,a._)("option",{value:5},"5",-1),Be=(0,a._)("option",{value:10},"10",-1),Fe=(0,a._)("option",{value:20},"20",-1),Ee=(0,a._)("option",{value:50},"50",-1),He=[Oe,Be,Fe,Ee],Ye={class:"pagination-buttons"},Re={class:"flex flex-btn"},Ke=(0,a._)("h5",{class:"showMobile"},"Refuzat",-1),Je={class:"media-select"},Xe={class:"table-container"},et={class:"user-list-table declined"},tt=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Nume/Prenume"),(0,a._)("th",null,"Nr. de telefon"),(0,a._)("th",null,"E-mail")])],-1),it={class:"table-row"},at=["onClick"],lt=["onClick"],st=["onClick"],nt=["onClick"],rt=["onClick"],ot={class:"q-mt-md inline-pagination"},dt={class:"hide-pagination",style:{display:"inline-flex"}},ut=(0,a._)("span",null,"Întâlniri pe pagină",-1),ct=(0,a._)("option",{value:5},"5",-1),ht=(0,a._)("option",{value:10},"10",-1),mt=(0,a._)("option",{value:20},"20",-1),pt=(0,a._)("option",{value:50},"50",-1),gt=[ct,ht,mt,pt],vt={class:"pagination-buttons"},_t={class:"flex justify-center"},wt={class:"flex",style:{"justify-content":"flex-end",width:"70%","margin-top":"1rem","min-width":"200px"}},ft={class:"flex icon",style:{"justify-content":"flex-end","max-width":"94%",gap:"5%","margin-bottom":"2rem"}},bt=(0,a._)("h5",{class:"showMobile"},"Conferințe",-1),Pt={class:"table-container"},Dt={class:"user-list-table department"},kt=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Name"),(0,a._)("th",null,"Number"),(0,a._)("th",null,"Department")])],-1),Ut={class:"table-row"},Ct=["onClick"],yt=["onClick"],zt=["onClick"],Lt=["onClick"],xt={class:"q-mt-md inline-pagination"},Wt={style:{display:"inline-flex"}},Nt=(0,a._)("span",null,"Întâlniri pe pagină",-1),$t=(0,a._)("option",{value:5},"5",-1),qt=(0,a._)("option",{value:10},"10",-1),Mt=(0,a._)("option",{value:20},"20",-1),It=(0,a._)("option",{value:50},"50",-1),At=[$t,qt,Mt,It],St={class:"pagination-buttons"},Zt=(0,a._)("h5",{class:"q-mb-lg"}," You can add department admins using this link ",-1),Vt=(0,a.Uk)("Copy to Clipboard"),Tt=(0,a.Uk)("Close");function Gt(e,t,i,l,r,o){const d=(0,a.up)("q-btn"),u=(0,a.up)("q-select"),c=(0,a.up)("q-icon"),h=(0,a.up)("q-tab-panel"),m=(0,a.up)("q-date"),p=(0,a.up)("q-tab-panels"),g=(0,a.up)("q-card-actions"),v=(0,a.up)("q-card-section"),_=(0,a.up)("q-card"),w=(0,a.up)("q-dialog"),f=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(_,{class:"my-card new-card info"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a._)("div",se,[(0,a.Wm)(p,{class:"admin-home",modelValue:r.tabs,"onUpdate:modelValue":t[12]||(t[12]=e=>r.tabs=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{name:"approved"},{default:(0,a.w5)((()=>[(0,a._)("div",ne,[(0,a.Wm)(d,{round:"",onClick:t[0]||(t[0]=e=>o.exportFile(o.approvedUsers.arr,"Approved")),color:"green",icon:"download"}),re,(0,a._)("div",oe,["admin"==e.$store.getters.userData.role?((0,a.wg)(),(0,a.j4)(u,{key:0,options:o.departmentList,modelValue:r.departmentName,"onUpdate:modelValue":t[1]||(t[1]=e=>r.departmentName=e),outlined:"",dense:"",class:"bg-white"},null,8,["options","modelValue"])):(0,a.kq)("",!0)])]),(0,a._)("div",de,[(0,a._)("table",ue,[ce,(0,a._)("tbody",he,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.approvedUsers.arr,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",{onClick:t=>o.viewUser(e)},(0,n.zw)(e.name),9,me),(0,a._)("td",{class:"hideMobile",onClick:t=>o.callUser(e.phoneNumber)},(0,n.zw)(e.phoneNumber),9,pe),(0,a._)("td",{class:"showMobile",onClick:t=>o.callUser(e.phoneNumber)},[(0,a.Wm)(c,{name:"phone"})],8,ge),(0,a._)("td",{onClick:t=>o.mailUser(e.email),class:"hideMobile hide-this"},(0,n.zw)(e.email),9,ve),(0,a._)("td",{onClick:t=>o.mailUser(e.email),class:"showMobile last hide-this"},[(0,a.Wm)(c,{name:"email"})],8,_e)])))),128))])])]),(0,a._)("div",we,[(0,a._)("div",fe,[be,(0,a.wy)((0,a._)("select",{class:"paginationSelect","onUpdate:modelValue":t[2]||(t[2]=e=>r.resultsPerPage=e)},Ce,512),[[s.bM,r.resultsPerPage]])]),(0,a._)("div",null,[(0,a._)("div",ye,[(0,a.Wm)(d,{size:"sm",round:"","text-color":"white",icon:"chevron_left","no-caps":"",onClick:o.decreasePage,disabled:1===r.currentPage},null,8,["onClick","disabled"]),(0,a._)("span",null,(0,n.zw)(r.currentPage),1),(0,a.Wm)(d,{size:"sm",round:"","text-color":"white",onClick:o.increasePage,"no-caps":"",icon:"chevron_right",disabled:r.currentPage>=o.maxPage},null,8,["onClick","disabled"])])]),(0,a._)("div",null,[(0,a._)("p",null,(0,n.zw)(o.approvedUsers.first)+"-"+(0,n.zw)(o.approvedUsers.last)+" din "+(0,n.zw)(o.approvedUsers.total),1)])])])),_:1}),ze,(0,a.Wm)(h,{name:"pending"},{default:(0,a.w5)((()=>[(0,a._)("div",Le,[(0,a.Wm)(d,{round:"",onClick:t[3]||(t[3]=e=>o.exportFile(o.pendingUsers.arr,"Pending")),color:"green",icon:"download"}),xe,(0,a._)("div",We,["admin"==e.$store.getters.userData.role?((0,a.wg)(),(0,a.j4)(u,{key:0,dense:"",options:o.departmentList,modelValue:r.departmentName,"onUpdate:modelValue":t[4]||(t[4]=e=>r.departmentName=e),outlined:"",class:"bg-white"},null,8,["options","modelValue"])):(0,a.kq)("",!0)])]),(0,a._)("div",Ne,[(0,a._)("table",$e,[qe,(0,a._)("tbody",Me,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pendingUsers.arr,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",{onClick:t=>o.viewUser(e)},(0,n.zw)(e.name),9,Ie),(0,a._)("td",{class:"hideMobile",onClick:t=>o.callUser(e.phoneNumber)},(0,n.zw)(e.phoneNumber),9,Ae),(0,a._)("td",{class:"showMobile hide-this",onClick:t=>o.callUser(e.phoneNumber)},[(0,a.Wm)(c,{name:"phone"})],8,Se),(0,a._)("td",{onClick:t=>o.mailUser(e.email),class:"hideMobile last hide-this"},(0,n.zw)(e.email),9,Ze),(0,a._)("td",{onClick:t=>o.mailUser(e.email),class:"showMobile last hide-this"},[(0,a.Wm)(c,{name:"email"})],8,Ve),(0,a._)("td",Te,[(0,a.Wm)(d,{color:"green",icon:"check",size:"xs",round:"",onClick:t=>o.approveUser(e.uid)},null,8,["onClick"]),(0,a.Wm)(d,{onClick:t=>o.declineUser(e.uid),color:"red",size:"xs","text-color":"white",round:"",icon:"close"},null,8,["onClick"])])])))),128))])])]),(0,a._)("div",Ge,[(0,a._)("div",Qe,[je,(0,a.wy)((0,a._)("select",{class:"paginationSelect","onUpdate:modelValue":t[5]||(t[5]=e=>r.resultsPerPage=e)},He,512),[[s.bM,r.resultsPerPage]])]),(0,a._)("div",null,[(0,a._)("div",Ye,[(0,a.Wm)(d,{size:"sm",round:"","text-color":"white",icon:"chevron_left","no-caps":"",onClick:o.decreasePage,disabled:1===r.currentPage},null,8,["onClick","disabled"]),(0,a._)("span",null,(0,n.zw)(r.currentPage),1),(0,a.Wm)(d,{size:"sm",round:"","text-color":"white",onClick:o.increasePage,"no-caps":"",icon:"chevron_right",disabled:r.currentPage>=o.maxPagePending},null,8,["onClick","disabled"])])]),(0,a._)("div",null,[(0,a._)("p",null,(0,n.zw)(o.pendingUsers.first)+"-"+(0,n.zw)(o.pendingUsers.last)+" din "+(0,n.zw)(o.pendingUsers.total),1)])])])),_:1}),(0,a.Wm)(h,{name:"declined"},{default:(0,a.w5)((()=>[(0,a._)("div",Re,[(0,a.Wm)(d,{round:"",onClick:t[6]||(t[6]=e=>o.exportFile(o.declinedUsers.arr,"Declined")),color:"green",icon:"download"}),Ke,(0,a._)("div",Je,["admin"==e.$store.getters.userData.role?((0,a.wg)(),(0,a.j4)(u,{key:0,options:o.departmentList,modelValue:r.departmentName,"onUpdate:modelValue":t[7]||(t[7]=e=>r.departmentName=e),outlined:"",dense:""},null,8,["options","modelValue"])):(0,a.kq)("",!0)])]),(0,a._)("div",Xe,[(0,a._)("table",et,[tt,(0,a._)("tbody",it,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.declinedUsers.arr,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",{onClick:t=>o.viewUser(e)},(0,n.zw)(e.name),9,at),(0,a._)("td",{class:"hideMobile",onClick:t=>o.viewUser(e)},(0,n.zw)(e.phoneNumber),9,lt),(0,a._)("td",{class:"showMobile",onClick:t=>o.callUser(e.phoneNumber)},[(0,a.Wm)(c,{name:"phone"})],8,st),(0,a._)("td",{onClick:t=>o.mailUser(e.email),class:"hideMobile last hide-this"},(0,n.zw)(e.email),9,nt),(0,a._)("td",{onClick:t=>o.mailUser(e.email),class:"showMobile last hide-this"},[(0,a.Wm)(c,{name:"email"})],8,rt)])))),128))])])]),(0,a._)("div",ot,[(0,a._)("div",dt,[ut,(0,a.wy)((0,a._)("select",{class:"paginationSelect","onUpdate:modelValue":t[8]||(t[8]=e=>r.resultsPerPage=e)},gt,512),[[s.bM,r.resultsPerPage]])]),(0,a._)("div",null,[(0,a._)("div",vt,[(0,a.Wm)(d,{size:"sm",round:"","text-color":"white",icon:"chevron_left","no-caps":"",onClick:o.decreasePage,disabled:1===r.currentPage},null,8,["onClick","disabled"]),(0,a._)("span",null,(0,n.zw)(r.currentPage),1),(0,a.Wm)(d,{size:"sm",round:"","text-color":"white",onClick:o.increasePage,"no-caps":"",icon:"chevron_right",disabled:r.currentPage>=o.maxPageDeclined},null,8,["onClick","disabled"])])]),(0,a._)("div",null,[(0,a._)("p",null,(0,n.zw)(o.declinedUsers.first)+"-"+(0,n.zw)(o.declinedUsers.last)+" din "+(0,n.zw)(o.declinedUsers.total),1)])])])),_:1}),(0,a.Wm)(h,{name:"date"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",_t,[(0,a.Wm)(m,{modelValue:r.dateModel,"onUpdate:modelValue":t[9]||(t[9]=e=>r.dateModel=e),range:""},null,8,["modelValue"])]),(0,a._)("div",wt,[(0,a.Wm)(d,{round:"",icon:"check",color:"green",loading:r.dateSetting,onClick:o.setDate},null,8,["loading","onClick"])])])])),_:1}),(0,a.Wm)(h,{name:"departments"},{default:(0,a.w5)((()=>[(0,a._)("div",ft,[bt,(0,a.Wm)(d,{"no-caps":"",round:"",color:"green",size:"small",onClick:t[10]||(t[10]=e=>r.showDepartmentDialog=!0),icon:"add"})]),(0,a._)("div",Pt,[(0,a._)("table",Dt,[kt,(0,a._)("tbody",Ut,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.departmentUsers.arr,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",{onClick:t=>o.viewUser(e)},(0,n.zw)(e.name),9,Ct),(0,a._)("td",{class:"hideMobile",onClick:t=>o.viewUser(e)},(0,n.zw)(e.phoneNumber),9,yt),(0,a._)("td",{class:"showMobile",onClick:t=>o.callUser(e.phoneNumber)},[(0,a.Wm)(c,{name:"phone"})],8,zt),(0,a._)("td",{onClick:t=>o.viewUser(e),class:"last hide-this"},(0,n.zw)(e.departmentName),9,Lt)])))),128))])])]),(0,a._)("div",xt,[(0,a._)("div",Wt,[Nt,(0,a.wy)((0,a._)("select",{class:"paginationSelect","onUpdate:modelValue":t[11]||(t[11]=e=>r.resultsPerPage=e)},At,512),[[s.bM,r.resultsPerPage]])]),(0,a._)("div",null,[(0,a._)("div",St,[(0,a.Wm)(d,{size:"sm",round:"","text-color":"white",icon:"chevron_left","no-caps":"",onClick:o.decreasePage,disabled:1===r.currentPage},null,8,["onClick","disabled"]),(0,a._)("span",null,(0,n.zw)(r.currentPage),1),(0,a.Wm)(d,{size:"sm",round:"","text-color":"white",onClick:o.increasePage,"no-caps":"",icon:"chevron_right",disabled:r.currentPage>=o.maxPageDepartments},null,8,["onClick","disabled"])])]),(0,a._)("div",null,[(0,a._)("p",null,(0,n.zw)(o.departmentUsers.first)+"-"+(0,n.zw)(o.departmentUsers.last)+" din "+(0,n.zw)(o.departmentUsers.total),1)])])])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(w,{modelValue:r.showDepartmentDialog,"onUpdate:modelValue":t[14]||(t[14]=e=>r.showDepartmentDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"q-px-md q-py-lg center-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"text-center"},{default:(0,a.w5)((()=>[Zt,(0,a._)("p",{onClick:t[13]||(t[13]=(...e)=>o.copyLink&&o.copyLink(...e)),class:"text-primary link-text cursor-pointer"},(0,n.zw)(o.departmentLink),1),(0,a.Wm)(g,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{onClick:o.copyLink,"no-caps":"",color:"secondary",flat:""},{default:(0,a.w5)((()=>[Vt])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,a.Wm)(g,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{rounded:"",flat:"",color:"grey"},{default:(0,a.w5)((()=>[Tt])),_:1})),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})])),_:1})}var Qt=i(1465);const jt={mounted(){var e,t,i,a,l,s,n,r,o;null!==(e=this.$route)&&void 0!==e&&null!==(t=e.query)&&void 0!==t&&t.q&&("departments"==(null===(a=this.$route)||void 0===a||null===(l=a.query)||void 0===l?void 0:l.q)&&"admin"!=(null===(s=this.$store.getters.userData)||void 0===s?void 0:s.role)?this.tabs="approved":this.tabs=null===(n=this.$route)||void 0===n||null===(r=n.query)||void 0===r?void 0:r.q);(this.dateList&&(this.dateModel=this.dateList),"department"==(null===(i=this.$store.getters.userData)||void 0===i?void 0:i.role))&&(this.departmentName=null===(o=this.$store.getters.userData)||void 0===o?void 0:o.departmentName);this.$store.dispatch("getUserList")},data(){return{tabs:"approved",dateModel:{from:"2020/07/08",to:"2020/07/17"},loading:!1,dateSetting:!1,departmentName:"All",showDepartmentDialog:!1,resultsPerPage:20,currentPage:1}},watch:{departmentName:{handler:function(){this.currentPage=1}},resultsPerPage:{handler:function(){this.currentPage=1}},"$route.query.q":{handler:function(){var e,t,i,a,l;null!==(e=this.$route)&&void 0!==e&&null!==(t=e.query)&&void 0!==t&&t.q?"departments"==(null===(i=this.$route)||void 0===i||null===(a=i.query)||void 0===a?void 0:a.q)&&"admin"!=(null===(l=this.$store.getters.userData)||void 0===l?void 0:l.role)?this.tabs="approved":this.tabs=this.$route.query.q:this.tabs="approved"},deep:!0,immediate:!0},dateList:{handler:function(){this.dateModel=this.dateList}},tabs:{handler:function(){this.currentPage=1}}},methods:{increasePage(){this.currentPage<this.maxPage&&(this.currentPage=this.currentPage+1)},decreasePage(){this.currentPage>1&&(this.currentPage=this.currentPage-1)},copyLink(){navigator.clipboard.writeText(this.departmentLink),this.$q.notify({message:"Text copied to clipboard"})},mailUser(e){""!=e&&window.open(`mailto: ${e}`)},callUser(e){""!=e&&window.open(`tel: ${e}`)},exportFile(e,t){const i=[{value:"Numele și prenumele",fontWeight:"bold"},{value:"E-mail",fontWeight:"bold"},{value:"Număr de telefon",fontWeight:"bold"},{value:"Data nașterii",fontWeight:"bold"},{value:"Gen",fontWeight:"bold"},{value:"Mărime tricou",fontWeight:"bold"},{value:"Zonă",fontWeight:"bold"},{value:"Comunitatea",fontWeight:"bold"},{value:"Categoria",fontWeight:"bold"},{value:"Club",fontWeight:"bold"},{value:"Instructor - anul investiturii:",fontWeight:"bold"},{value:"Ghid - anul investiturii:",fontWeight:"bold"},{value:"Master Ghid - anul investiturii:",fontWeight:"bold"},{value:"Specializările",fontWeight:"bold"},{value:"Status",fontWeight:"bold"}];let a=[i];e.forEach((e=>{let t="";if(""!=e.dateOfBirth){let i=new Date(e.dateOfBirth);const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=a[i.getMonth()];t=i.getDate()+" "+l+", "+i.getFullYear()}let i=[];i.push({value:e.name},{value:e.email},{value:e.phoneNumber},{value:t},{value:e.etnic},{value:e.gender},{value:e.size},{value:e.region},{value:e.state},{value:e.category},{value:e.clubName},{value:e.Instructor},{value:e.Ghid},{value:e.masterGhid},{value:null!==e&&void 0!==e&&e.tagList?e.tagList.join(", "):""},{value:e.status?"Active":"InActive"}),a.push(i)})),(0,Qt.Z)(a,{fileName:t+".xlsx"})},async getData(){await this.$store.dispatch("getUserList")},async approveUser(e){await this.$store.dispatch("approveUser",e)},async declineUser(e){await this.$store.dispatch("declineUser",e)},async deleteUser(e){await this.$store.dispatch("deleteUser",e)},viewUser(e){this.$store.dispatch("setSelectedUser",e),this.$router.push("/user-details")},async setDate(){this.dateSetting||(this.dateModel?(this.dateSetting=!0,await this.$store.dispatch("setDateRange",{date:this.dateModel,uid:this.$store.getters.userData.uid}),this.dateSetting=!1):this.$q.notify({color:"red",message:"Te rugăm să introduci corect data."}))}},computed:{departmentUsers(){const e=this.$store.getters.userList.filter((e=>"department"==e.role));let t=(this.currentPage-1)*this.resultsPerPage;const i=e.filter(((e,i)=>i>=t&&i<t+this.resultsPerPage));return{arr:i,first:t+1,total:e.length,last:this.currentPage==this.maxPageDepartments?e.length:this.currentPage>this.maxPageDepartments?1:t+this.resultsPerPage}},userList(){this.currentPage,this.resultsPerPage;return this.$store.getters.userList},approvedUsers(){const e=this.userList.filter((e=>"All"==this.departmentName?1==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role:1==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role&&e.department==this.departmentName));let t=(this.currentPage-1)*this.resultsPerPage;const i=e.filter(((e,i)=>i>=t&&i<t+this.resultsPerPage));return{arr:i,first:t+1,total:e.length,last:this.currentPage==this.maxPage?e.length:this.currentPage>this.maxPage?1:t+this.resultsPerPage}},declinedUsers(){const e=this.userList.filter((e=>"All"==this.departmentName?0==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role:0==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role&&e.department==this.departmentName));let t=(this.currentPage-1)*this.resultsPerPage;const i=e.filter(((e,i)=>i>=t&&i<t+this.resultsPerPage));return{arr:i,first:t+1,total:e.length,last:this.currentPage==this.maxPageDeclined?e.length:this.currentPage>this.maxPageDeclined?1:t+this.resultsPerPage}},pendingUsers(){const e=this.userList.filter((e=>"All"==this.departmentName?"pending"==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role:"pending"==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role&&e.department==this.departmentName));let t=(this.currentPage-1)*this.resultsPerPage;const i=e.filter(((e,i)=>i>=t&&i<t+this.resultsPerPage));return{arr:i,first:t+1,total:e.length,last:this.currentPage==this.maxPagePending?e.length:this.currentPage>this.maxPagePending?1:t+this.resultsPerPage}},departmentList(){let e=this.$store.getters.userList.filter((e=>"department"==e.role)).map((e=>e.departmentName));return e.unshift("All"),e},dateList(){return this.$store.getters.dateList},departmentLink(){return window.location.host+"/#/signup_department"},maxPage(){const e=this.userList.filter((e=>"All"==this.departmentName?1==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role:1==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role&&e.department==this.departmentName));return Math.ceil(e.length/this.resultsPerPage)},maxPagePending(){const e=this.userList.filter((e=>"All"==this.departmentName?"pending"==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role:"pending"==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role&&e.department==this.departmentName));return Math.ceil(e.length/this.resultsPerPage)},maxPageDeclined(){const e=this.userList.filter((e=>"All"==this.departmentName?0==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role:0==e.isAuthorized&&"admin"!=e.role&&"department"!=e.role&&e.department==this.departmentName));return Math.ceil(e.length/this.resultsPerPage)},maxPageDepartments(){const e=this.$store.getters.userList.filter((e=>"department"==e.role));return Math.ceil(e.length/this.resultsPerPage)}}};var Ot=i(9800),Bt=i(4106),Ft=i(8841);const Et=(0,Q.Z)(jt,[["render",Gt]]),Ht=Et;ie()(jt,"components",{QCard:j.Z,QCardSection:O.Z,QTabPanels:Ot.Z,QTabPanel:Bt.Z,QBtn:B.Z,QSelect:H.Z,QIcon:F.Z,QTable:Ft.Z,QDate:J.Z,QDialog:E.Z,QCardActions:X.Z}),ie()(jt,"directives",{ClosePopup:ee.Z});const Yt={components:{teamHome:le,adminHome:Ht},computed:{userData(){return this.$store.getters.userData}}},Rt=(0,Q.Z)(Yt,[["render",l]]),Kt=Rt}}]);
"use strict";(globalThis["webpackChunkform1_quasar"]=globalThis["webpackChunkform1_quasar"]||[]).push([[819],{7819:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var a=n(9835),s=n(6970),r=n(1957);const l={class:"container"},i={class:"attendance-container shadowed"},o={class:"attendance-summary"},c=(0,a._)("h4",{style:{color:"#233975"}},"Prezența",-1),u={class:"shadowed",style:{"border-radius":"0.3rem","margin-top":"1rem"}},d={class:"flex justify-space-between"},h={class:"attendance-container shadowed",style:{"margin-top":"1rem"}},g={class:"attendance-summary"},m=(0,a._)("h4",{style:{color:"#233975"}},"Lista întâlnirilor",-1),v={class:"eventlist"},p={class:"q-mt-sm q-mb-md flex justify-between q-mx-auto",style:{width:"100%"}},w=(0,a._)("span",{style:{"font-size":"12px"},class:"linkcolor q-pr-sm font-weight-light subtitle1 text-left"},"Adaugă întâlnire",-1),f={class:"table-container"},_={key:0,class:"user-list-table lista"},P=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Titlul îtâlnirii"),(0,a._)("th",{style:{"text-align":"end"}},"Data Intalnirii")])],-1),b={class:"table-row"},y=["onClick"],x={class:"event-date-td"},C={key:1,class:"shadowed q-mx-auto",style:{"border-radius":"8px",width:"90%"}},L=(0,a._)("h4",{class:"text-weight-bold linkcolor text-left",style:{opacity:"0.5"}}," Nu există întâlniri încă ",-1),k=[L],D={class:"q-mt-md inline-pagination"},z={style:{display:"inline-flex"}},I=(0,a._)("span",null,"Întâlniri pe pagină",-1),q=(0,a._)("option",{value:5},"5",-1),E=(0,a._)("option",{value:10},"10",-1),A=(0,a._)("option",{value:20},"20",-1),M=(0,a._)("option",{value:50},"50",-1),N=[q,E,A,M],$={class:"pagination-buttons"};function F(e,t,n,L,q,E){const A=(0,a.up)("q-btn"),M=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(M,{class:"center-card q-px-lg info client-event-list",style:{"padding-top":"3rem"}},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("div",i,[(0,a._)("div",o,[c,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.listOfAttendance,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a._)("div",u,[(0,a._)("div",d,[(0,a._)("span",null,(0,s.zw)(e.name),1),(0,a._)("span",null,(0,s.zw)(e.attendance)+" / "+(0,s.zw)(E.userInfo.eventList.length),1)])])])))),128))])]),(0,a._)("div",h,[(0,a._)("div",g,[m,(0,a._)("div",v,[(0,a._)("div",p,[(0,a.Wm)(A,{size:"md",color:"green",icon:"download",onClick:t[0]||(t[0]=e=>E.exportFile("events")),round:""}),(0,a._)("div",null,[w,(0,a.Wm)(A,{class:"bg-linkcolor",icon:"add",round:"",onClick:t[1]||(t[1]=t=>e.$router.push("/add-event"))})])])]),(0,a._)("div",f,[E.eventList.arr.length>0?((0,a.wg)(),(0,a.iD)("table",_,[P,(0,a._)("tbody",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.eventList.arr,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{class:"shadowed tr",key:t,onClick:t=>E.showEventDetails(e)},[(0,a._)("td",null,(0,s.zw)(e.name),1),(0,a._)("td",x,(0,s.zw)(E.formatDate(e.date)),1)],8,y)))),128))])])):((0,a.wg)(),(0,a.iD)("div",C,k))]),(0,a._)("div",D,[(0,a._)("div",z,[I,(0,a.wy)((0,a._)("select",{class:"paginationSelect","onUpdate:modelValue":t[2]||(t[2]=e=>q.resultsPerPage=e)},N,512),[[r.bM,q.resultsPerPage]])]),(0,a._)("div",null,[(0,a._)("div",$,[(0,a.Wm)(A,{size:"sm",round:"","text-color":"white",icon:"chevron_left","no-caps":"",disabled:1===q.currentPage,onClick:E.decreasePage},null,8,["disabled","onClick"]),(0,a._)("span",null,(0,s.zw)(q.currentPage),1),(0,a.Wm)(A,{size:"sm",round:"","text-color":"white","no-caps":"",icon:"chevron_right",onClick:E.increasePage,disabled:q.currentPage>=E.maxPage},null,8,["onClick","disabled"])])]),(0,a._)("div",null,[(0,a._)("p",null,(0,s.zw)(E.eventList.first)+"-"+(0,s.zw)(E.eventList.last)+" din "+(0,s.zw)(E.eventList.total),1)])])])])])])),_:1})}var O=n(1465);const S={name:"EventlistView",components:{},data(){return{resultsPerPage:20,currentPage:1}},beforeMount(){"admin"==this.userInfo.role&&this.$router.push("/")},async mounted(){await this.$store.dispatch("getUserData")},methods:{exportFile(e){let t=[[],[],[{value:"Short Summary - "+this.userInfo.name,span:2,align:"center",borderColor:"#000000",rightBorderColor:"#58eb34"}],[{value:"Numele copilului",borderColor:"#000000"},{value:"Numar de prezențe/Numar de întâlniri",borderColor:"#000000"}]];this.listOfAttendance.forEach((e=>{t.push([{value:e.name,borderColor:"#000000"},{value:e.attendance+"/"+this.userInfo.eventList.length,borderColor:"#000000"}])})),(0,O.Z)(t,{fileName:e+".xlsx"})},formatDate(e){if(e&&new Date(e)){let t,n=new Date(e);const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=a[n.getMonth()];return t=n.getDate()+" "+s+", "+n.getFullYear(),t}return""},showEventDetails(e){this.$store.dispatch("selectEvent",e)},increasePage(){this.currentPage<this.maxPage&&(this.currentPage=this.currentPage+1)},decreasePage(){this.currentPage>1&&(this.currentPage=this.currentPage-1)}},computed:{eventList(){let e=(this.currentPage-1)*this.resultsPerPage;const t=this.userInfo.eventList.filter(((t,n)=>n>=e&&n<e+this.resultsPerPage)).sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0));return{arr:t,first:e+1,total:this.userInfo.eventList.length,last:this.currentPage==this.maxPage?this.userInfo.eventList.length:this.currentPage>this.maxPage?1:e+this.resultsPerPage}},userInfo(){return this.$store.getters.userData},listOfAttendance(){let e=[];return this.userInfo.teamList.forEach((t=>{e.push({name:t.name,attendance:0})})),e=e.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0)),this.userInfo.eventList.forEach((t=>{t.attendanceList.forEach((t=>{const n=e.findIndex((e=>e.name==t));n>-1&&(e[n].attendance=e[n].attendance+1)}))})),e},maxPage(){const e=this.userInfo.eventList;return Math.ceil(e.length/this.resultsPerPage)}}};var W=n(1639),Z=n(4458),j=n(4455),J=n(9984),T=n.n(J);const Y=(0,W.Z)(S,[["render",F]]),B=Y;T()(S,"components",{QCard:Z.Z,QBtn:j.Z})}}]);
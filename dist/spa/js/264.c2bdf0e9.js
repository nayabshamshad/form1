"use strict";(globalThis["webpackChunkform1_quasar"]=globalThis["webpackChunkform1_quasar"]||[]).push([[264],{1264:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var a=n(9835),r=n(6970);const s={class:"container"},o={class:"attendance-container"},l={class:"attendance-summary"},i=(0,a._)("h5",{style:{"font-size":"18px"}},[(0,a._)("span",null,"Summary")],-1),u={class:"flex justify-space-around"},d={class:"eventlist"},c=(0,a.Uk)(" Add Event "),v={style:{"margin-top":"1rem"},class:"flex justify-center"},m={key:1,style:{width:"60%"}};function h(e,t,n,h,f,p){var w,g,b;const k=(0,a.up)("q-btn"),y=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",o,[(0,a._)("div",l,[i,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.listOfAttendance,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a._)("div",u,[(0,a._)("span",null,(0,r.zw)(e.name),1),(0,a._)("span",null,(0,r.zw)(e.attendance)+" / "+(0,r.zw)(p.userInfo.eventList.length),1)])])))),128))])]),(0,a._)("div",d,[(0,a._)("span",null,[(null===(w=p.userInfo)||void 0===w||null===(g=w.eventList)||void 0===g?void 0:g.length)>0?((0,a.wg)(),(0,a.j4)(k,{key:0,round:"",color:"green",size:"sm",icon:"download",onClick:t[0]||(t[0]=e=>p.exportFile("events"))})):(0,a.kq)("",!0),(0,a.Wm)(k,{color:"purple",rounded:"",type:"button",class:"btn",size:"sm",onClick:t[1]||(t[1]=t=>e.$router.push("/add-event"))},{default:(0,a.w5)((()=>[c])),_:1})])]),(0,a._)("div",v,[(null===(b=p.userInfo.eventList)||void 0===b?void 0:b.length)>0?((0,a.wg)(),(0,a.j4)(y,{key:0,style:{width:"80%"},title:"Event List",rows:p.userInfo.eventList,columns:[{name:"name",label:"Event Name",required:!0,align:"center",field:e=>e.name},{name:"date",label:"Date of Event",required:!0,align:"center",field:e=>p.formatDate(e.date)}],flat:"",dark:"",bordered:"",onRowClick:p.showEventDetails},null,8,["rows","columns","onRowClick"])):((0,a.wg)(),(0,a.iD)("div",m,"Your Events will show here"))])])}var f=n(1465);const p={name:"EventlistView",components:{},beforeMount(){"admin"==this.userInfo.role&&this.$router.push("/")},methods:{exportFile(e){let t=[[],[],[{value:"Short Summary - "+this.userInfo.name,span:2,align:"center",borderColor:"#000000",rightBorderColor:"#58eb34"}],[{value:"Numele copilului",borderColor:"#000000"},{value:"Numar de prezențe/Numar de întâlniri",borderColor:"#000000"}]];this.listOfAttendance.forEach((e=>{t.push([{value:e.name,borderColor:"#000000"},{value:e.attendance+"/"+this.userInfo.eventList.length,borderColor:"#000000"}])})),(0,f.Z)(t,{fileName:e+".xlsx"})},formatDate(e){if(e&&new Date(e)){let t,n=new Date(e);const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=a[n.getMonth()];return t=n.getDate()+" "+r+", "+n.getFullYear(),t}return""},showEventDetails(e,t,n){this.$store.dispatch("selectEvent",t)}},computed:{userInfo(){return this.$store.getters.userData},listOfAttendance(){let e=[];return this.userInfo.teamList.forEach((t=>{e.push({name:t.name,attendance:0})})),this.userInfo.eventList.forEach((t=>{t.attendanceList.forEach((t=>{const n=e.findIndex((e=>e.name==t));e[n].attendance=e[n].attendance+1}))})),e}}};var w=n(1639),g=n(4455),b=n(9032),k=n(9984),y=n.n(k);const D=(0,w.Z)(p,[["render",h]]),E=D;y()(p,"components",{QBtn:g.Z,QTable:b.Z})}}]);
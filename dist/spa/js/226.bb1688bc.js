"use strict";(globalThis["webpackChunkform1_quasar"]=globalThis["webpackChunkform1_quasar"]||[]).push([[226],{226:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});i(702);var a=i(9835),l=i(6970);const s={class:"container q-py-lg p-px-lg q-mx-lg"},n={class:"flex q-mb-lg q-pb-lg items-center"},o={style:{width:"15%"}},r=(0,a._)("div",{style:{width:"70%"},class:"text-center"},[(0,a._)("h5",{class:"linkcolor text-weight-bold"},"Adăugare întâlnire")],-1),d={style:{width:"15%"}},c=(0,a.Uk)("Salvare"),h={class:"row justify-between align-center"},u={class:"shadowed flex justify-between no-wrap",style:{width:"63%"}},g=(0,a._)("h6",{style:{width:"40%"},class:"linkcolor text-weight-bold"},"Titlul",-1),m={style:{width:"55%"}},p={class:"shadowed flex no-wrap items-center justify-around",style:{width:"35%"}},v={class:"q-my-none linkcolor text-weight-bold"},w={class:"row items-center justify-end"},f={class:"shadowed q-mt-lg add-event-textarea"},y=(0,a._)("h5",{class:"text-weight-bold linkcolor"},"Scurtă descriere:",-1),D={class:"shadowed q-mt-lg"},_=(0,a._)("h5",{class:"linkcolor text-center text-weight-bold q-pt-lg q-pb-md"}," Prezența ",-1),x={class:"q-mb-lg add-event-checkboxes"},b={class:"linkcolor text-weight-semibold q-mb-none text-capitalize"},q={class:"shadowed q-mt-lg linkcolor"},k=(0,a._)("h5",{class:"text-weight-bold q-pt-lg"},"Fotografii:",-1),I=(0,a._)("h6",{class:"text-weight-light q-mb-md"},"Adaugați max. 3 fotografii",-1),L={class:"flex justify-between no-wrap",style:{gap:"3px"}},V=["src"],W=(0,a._)("div",{class:"text-h6"},"Alertă",-1);function C(e,t,i,C,U,F){const T=(0,a.up)("q-btn"),Z=(0,a.up)("q-input"),Q=(0,a.up)("q-date"),$=(0,a.up)("q-popup-proxy"),z=(0,a.up)("q-icon"),j=(0,a.up)("q-checkbox"),N=(0,a.up)("q-card"),A=(0,a.up)("q-card-section"),O=(0,a.up)("q-card-actions"),P=(0,a.up)("q-dialog"),R=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(N,{class:"center-card info q-px-lg q-pt-lg add-event-card"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("div",n,[(0,a._)("div",o,[(0,a.Wm)(T,{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),round:"",icon:"chevron_left",class:"bg-linkcolor"})]),r,(0,a._)("div",d,[(0,a.Wm)(T,{"no-caps":"",class:"q-px-lg text-weight-bold",onClick:F.addEvent,color:"secondary",loading:U.isFetching},{default:(0,a.w5)((()=>[c])),_:1},8,["onClick","loading"])])]),(0,a._)("div",h,[(0,a._)("div",u,[g,(0,a._)("div",m,[(0,a.Wm)(Z,{borderless:"",modelValue:U.eventName,"onUpdate:modelValue":t[1]||(t[1]=e=>U.eventName=e),type:"text",color:"blue",placeholder:"Titlul întâlnirii","input-class":"linkcolor"},null,8,["modelValue"])])]),(0,a._)("div",p,[(0,a._)("h6",v,(0,l.zw)(U.eventDateView),1),(0,a.Wm)(z,{ref:"dateIcon",name:"event",class:"cursor-pointer linkcolor",size:"md"},{default:(0,a.w5)((()=>[(0,a.Wm)($,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{modelValue:U.eventDate,"onUpdate:modelValue":[t[2]||(t[2]=e=>U.eventDate=e),F.handleDateChange]},{default:(0,a.w5)((()=>[(0,a._)("div",w,[(0,a.wy)((0,a.Wm)(T,{label:"Close",color:"primary",flat:""},null,512),[[R]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},512)])]),(0,a._)("div",f,[y,(0,a.Wm)(Z,{modelValue:U.eventDesc,"onUpdate:modelValue":t[3]||(t[3]=e=>U.eventDesc=e),label:"Adăugați text...",type:"text",autogrow:"","input-class":"linkcolor",rules:[e=>e.length<=150||"Descrierea nu poate fi mai lungă de 150 de caractere."],"input-style":"min-height: 8rem;",borderless:""},null,8,["modelValue","rules"])]),(0,a._)("div",D,[_,(0,a._)("div",x,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(F.userData.teamList,((e,i)=>((0,a.wg)(),(0,a.iD)("div",{class:"shadowed q-my-sm flex justify-between",key:i},[(0,a._)("p",b,(0,l.zw)(e.name),1),(0,a.Wm)(j,{val:e.name,modelValue:U.attendanceList,"onUpdate:modelValue":t[4]||(t[4]=e=>U.attendanceList=e)},null,8,["val","modelValue"])])))),128))])]),(0,a._)("div",q,[k,I,(0,a._)("div",L,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(U.previewImages,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"img-card"},[(0,a.Wm)(T,{color:"red",size:"xs",icon:"remove",onClick:e=>F.removeImg(t),round:""},null,8,["onClick"]),(0,a._)("img",{src:e,class:"cursor-pointer iconed-img",alt:""},null,8,V)])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(3-U.previewImages.length,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"img-card select-img",key:e,onClick:t[5]||(t[5]=(...e)=>F.openInput&&F.openInput(...e))},[(0,a.Wm)(z,{name:"add_a_photo",size:"xl"})])))),128))])]),(0,a._)("input",{onChange:t[6]||(t[6]=(...e)=>F.handleImageUpload&&F.handleImageUpload(...e)),type:"file",ref:"imgInput",style:{display:"none"},name:"img",accept:"image/*"},null,544)])])),_:1}),(0,a.Wm)(P,{modelValue:U.errorDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>U.errorDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[W])),_:1}),(0,a.Wm)(A,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(U.error),1)])),_:1}),(0,a.Wm)(O,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(T,{flat:"",label:"OK",color:"primary"},null,512),[[R]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}i(4641),i(3269),i(6727),i(7574);var U=i(3926);const F={name:"addeventView",components:{},data(){return{eventName:"",eventDate:"2022/08/02",eventDesc:"",imageList:[],localImageList:[],isFetching:!1,previewImages:[],errorDialog:!1,error:"Te rugăm să reverifici datele introduse. ",attendanceList:[],eventDateView:"02/08/2022"}},mounted(){var e,t,i,a,l,s;"admin"!=(null===(e=this.$store)||void 0===e||null===(t=e.getters)||void 0===t||null===(i=t.userData)||void 0===i?void 0:i.role)&&"admin"!=(null===(a=this.$store)||void 0===a||null===(l=a.getters)||void 0===l||null===(s=l.userData)||void 0===s?void 0:s.role)||this.$router.push("/")},methods:{handleDateChange(e,t,i){let a=1==`${i.day}`.length?"0"+i.day:i.day,l=1==`${i.month}`.length?"0"+i.month:i.month;this.eventDateView=a+"/"+l+"/"+i.year},openInput(){this.previewImages.length<3?this.$refs.imgInput.click():this.$q.notify({message:"Nu poți adauga mai mult de 3 (trei) fotografii.",color:"red"})},async addEvent(){if(this.isFetching)return;this.isFetching=!0;let e=[];if(this.eventDesc.length>150)return void(this.isFetching=!1);const t=this.localImageList;if(0==t.length)return this.error="Trebuie încărcată cel puțin o fotografie!",this.errorDialog=!0,void(this.isFetching=!1);if(!(t.length<4))return this.error="Poți încărca între 1-3 fotografii.",this.errorDialog=!0,void(this.isFetching=!1);{let i=new Date+"-"+t[0].name;if(await U.tO.child(i).put(t[0],{contentType:t[0].type}).then((e=>e.ref.getDownloadURL())).then((t=>{e.push(t)})),t.length>1){let i=new Date+"-"+t[1].name;if(await U.tO.child(i).put(t[1],{contentType:t[1].type}).then((e=>e.ref.getDownloadURL())).then((t=>{e.push(t)})),t.length>2){let i=new Date+"-"+t[2].name;await U.tO.child(i).put(t[2],{contentType:t[2].type}).then((e=>e.ref.getDownloadURL())).then((t=>{e.push(t)}))}}this.imageList=e}return""==this.eventDate?(this.error="Te rugăm sa selectează data întâlnirii.",this.errorDialog=!0,void(this.isFetching=!1)):""==this.eventName?(this.error="Te rugăm sa adaugi titlul întâlnirii",this.errorDialog=!0,void(this.isFetching=!1)):""==this.eventDesc?(this.error="Te rugăm sa adaugi descrierea întâlnirii.",this.errorDialog=!0,void(this.isFetching=!1)):(await this.$store.dispatch("addEvent",{name:this.eventName,desc:this.eventDesc,date:this.eventDate,attendanceList:this.attendanceList,imageList:this.imageList}),void(this.isFetching=!1))},handleImageUpload(e){if(this.previewImages.length<3){const t=e.target.files[0];this.previewImages.push(URL.createObjectURL(t)),this.localImageList.push(t)}else this.previewImages.length>=3&&this.$q.notify({message:"Nu poți incărca mai mult de 3 fotografii.",color:"red"})},removeImg(e){this.previewImages.splice(e,1),this.localImageList.splice(e,1)},addUser(e){if(this.attendanceList.includes(e.target.value)&&!e.target.checked){let t=this.attendanceList.findIndex((t=>t==e.target.value));this.attendanceList.splice(t,1)}else e.target.checked&&!this.attendanceList.includes(e.target.value)&&this.attendanceList.push(e.target.value)}},computed:{userData(){return this.$store.getters.userData}}};var T=i(1639),Z=i(4458),Q=i(4455),$=i(6611),z=i(2857),j=i(2765),N=i(7088),A=i(6937),O=i(7743),P=i(3190),R=i(1821),H=i(2146),K=i(9984),Y=i.n(K);const E=(0,T.Z)(F,[["render",C]]),S=E;Y()(F,"components",{QCard:Z.Z,QBtn:Q.Z,QInput:$.Z,QIcon:z.Z,QPopupProxy:j.Z,QDate:N.Z,QCheckbox:A.Z,QDialog:O.Z,QCardSection:P.Z,QCardActions:R.Z}),Y()(F,"directives",{ClosePopup:H.Z})}}]);